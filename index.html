<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="/assets/images/test_image/icon.png" rel="icon" type="image/png"/>
    <title>Dormable!</title>

    <!-- Bootstrap core CSS -->
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.3/css/bootstrap.min.css"
          integrity="sha512-oc9+XSs1H243/FRN9Rw62Fn8EtxjEYWHXRvjS43YtueEewbS6ObfXcJNyohjHqVKFPoXXUxwc+q1K7Dee6vv9g=="
          referrerpolicy="no-referrer" rel="stylesheet"/>
    <link href="/assets/css/modal-animation.css" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link href="/assets/css/fontawesome.css" rel="stylesheet">
    <link href="/assets/css/main-dormable.css" rel="stylesheet">
    <link href="/assets/css/animated.css" rel="stylesheet">
    <link href="/assets/css/owl.css" rel="stylesheet">

</head>


<body>
<!-- ***** Preloader Start ***** -->
<div class="js-preloader" id="js-preloader">
    <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- ***** Preloader End ***** -->

<!-- ***** Header Area Start ***** -->
<header class="header-area header-sticky wow slideInDown" data-wow-delay="0s" data-wow-duration="0.75s">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <!-- ***** Logo Start ***** -->
                    <a class="logo" href="/index">
                    </a>
                    <!-- ***** Logo End ***** -->
                    <!-- ***** Menu Start ***** -->
                    <ul class="nav">
                        <li><a href="/index">Home</a></li>
                        <li><a href="/category-listing">Explore Listings</a></li>
                        <li><a href="/login">Log In | Sign Up</a></li>
                    </ul>
                    <a class='menu-trigger'>
                        <span>Menu</span>
                    </a>
                    <!-- ***** Menu End ***** -->
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- ***** Header Area End ***** -->

<div class="main-banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="top-text header-text">
                    <h6>Looking for a place to stay?</h6>
                    <h2>Simplify Your Student Housing Search!</h2>
                </div>
            </div>
            <!-- Insert Form Here -->
            <div class="container mt-5">
                <div class="card">
                    <div class="card-body">
                        <form id="search-form">
                            <div class="form-group">
                                <label for="location-select">Location</label>
                                <select class="form-control" id="location-select">
                                    <option value="">Any</option>
                                    <option>Manila</option>
                                    <option>Taft Ave</option>
                                    <option>Pablo Ocampo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="search-input">Search</label>
                                <input class="form-control" id="search-input" placeholder="Search Name" type="text">
                            </div>
                            <div class="form-group">
                                <label for="rating-select">Rating</label>
                                <select class="form-control" id="rating-select">
                                    <option selected value="">Any</option>
                                    <option class="fa fa-star" style="color: orange" value="5">(5) ★★★★★</option>
                                    <option class="fa fa-star" style="color: orange" value="4">(4) ★★★★</option>
                                    <option class="fa fa-star" style="color: orange" value="3">(3) ★★★</option>
                                    <option class="fa fa-star" style="color: orange" value="2">(2) ★★</option>
                                    <option class="fa fa-star" style="color: orange" value="1">(1) ★</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Price Range</label>
                                <div class="form-row">
                                    <div class="col">
                                        <input class="form-control" id="min-price" min="0" placeholder="Min"
                                               type="number">
                                    </div>
                                    <div class="col">
                                        <input class="form-control" id="max-price" min="0" placeholder="Max"
                                               type="number">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group text-center">
                                <button class="btn btn-primary" id="search-btn" type="submit">Search Now</button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="recent-listing">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-heading">
                    <h2>Popular Listing</h2>
                    <h6>Check Them Out</h6>
                    <button class="btn btn-outline-danger btn-sm" onclick="debugButton()">DEBUG BUTTON</button>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="owl-carousel owl-listing" id="featured-listings">
                    <!--Generate Listing Cards-->
                </div>

                <div class="section-heading" style="margin-bottom: -20px; margin-top: 10px">
                    <button class="btn btn-outline-info btn-sm" onclick="loadMoreFeaturedListing()">Load More</button>
                </div>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="about">
                    <div class="logo">
                        <img alt="Plot Listing" src="/assets/images/banner_logo/request-logo.png">
                    </div>
                    <p>
                        Can't find a specific listing? Click the button below to send a request form for a specific
                        listing you are
                        looking for!
                    </p>
                    <div class="main-white-button" style="margin-top: 1rem"><a href="/request-listing"><i
                        class="fa fa-plus"></i> Request a Listing</a></div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="helpful-links">
                    <h4>Helpful Links</h4>
                    <div class="row">
                        <div class="col-lg-6">
                            <ul>
                                <li><a href="#">About Us</a></li>
                                <li><a href="#">Awards</a></li>
                                <li><a href="#">Useful Sites</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="contact-us">
                    <h4>Contact Us</h4>
                    <p>Taft Avenue, Malate, Manila</p>
                    <div class="row">
                        <div class="col-lg-6">
                            <a href="#">010-020-0340</a>
                        </div>
                        <div class="col-lg-6">
                            <a href="#">090-080-0760</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="sub-footer">
                    <p>Copyright © 2021 Plot Listing Co., Ltd. All Rights Reserved.
                        <br>
                        Design: <a href="https://templatemo.com" rel="nofollow" title="CSS Templates">TemplateMo</a></p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Modal -->
<div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="dialog" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLongTitle">Info!</h4>
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center">
                <p style="font-size: 34px"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-danger" data-dismiss="modal" type="button">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->

<!-- JQuery -->
<script crossorigin="anonymous"
        integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
        referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<!-- Popper -->
<script crossorigin="anonymous"
        integrity="sha512-TPh2Oxlg1zp+kz3nFA0C5vVC6leG/6mm1z9+mA81MI5eaUVqasPLO8Cuk4gMF4gUfP5etR73rgU/8PNMsSesoQ=="
        referrerpolicy="no-referrer"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>
<!-- Bootstrap -->
<script crossorigin="anonymous"
        integrity="sha512-8qmis31OQi6hIRgvkht0s6mCOittjMa9GMqtK9hes5iEQBQE/Ca6yGE5FsW36vyipGoWQswBj/QBm2JR086Rkw=="
        referrerpolicy="no-referrer"
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.3/js/bootstrap.min.js"></script>
<!-- Owl Carousel -->
<script src="/assets/js/owl-carousel.js"></script>
<!-- Misc external scripts -->
<script src="/assets/js/animation.js"></script>
<script src="/assets/js/imagesloaded.js"></script>

<!-- My Scripts -->
<script src="/assets/js/populateData.js"></script>
<script src="/assets/js/listing.js"></script>
<script src="/assets/js/dbFetching.js"></script>
<script src="/assets/js/autostar-rating.js"></script>
<script src="/assets/js/login-register.js"></script>

<!-- Custom -->
<script src="/assets/js/custom.js"></script>

<!-- Page Scripts -->
<script>
    $(document).ready(function () {
        initFeaturedListing();
        $('input[type="number"]').on('keydown', function (e) {
            // Prevent '.' and ','
            if (e.key === '.' || e.key === ',')
                e.preventDefault();
            // Prevent '0' as first digit
            else if (this.value.length === 0 && e.key === '0')
                e.preventDefault();
            // Prevent non-numeric characters
            else if (e.key.length === 1 && !e.key.match(/[0-9]/))
                e.preventDefault();

        });

        $('#search-form').on('submit', function (e) {
            e.preventDefault();
            let searchForm = $('#search-form');

            //Get all the values from the form
            let location = searchForm.find('#location-select').val();
            let searchType = searchForm.find('#search-input').val();
            let rating = searchForm.find('#rating-select').val();
            let minPrice = searchForm.find('#min-price').val();
            let maxPrice = searchForm.find('#max-price').val();

            if (minPrice > maxPrice && maxPrice.length > 0 && minPrice.length > 0) {
                showPopup('Minimum price cannot be greater than maximum price!')
                return;
            } else if (maxPrice < minPrice && minPrice.length > 0 && maxPrice.length > 0) {
                showPopup('Maximum price cannot be less than minimum price!')
                return;
            }

            //check if the value of minPrice and maxPrice starts with 0 and length is greater than 1
            if (minPrice.length > 1 && minPrice.startsWith('0')) {
                showPopup('Minimum price cannot start with 0!')
                return;
            } else if (maxPrice.length > 1 && maxPrice.startsWith('0')) {
                showPopup('Maximum price cannot start with 0!')
                return;
            }

            //Create a new object to store the values
            let searchFilter = {
                location: location,
                searchType: searchType,
                rating: rating,
                minPrice: minPrice,
                maxPrice: maxPrice
            };

            //Store in session storage
            let params = new URLSearchParams(searchFilter).toString();

            //Redirect to search page
            window.location.href = `/search-result?${params}`;

        });
    });
</script>
</body>

</html>
